(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{161:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n,r,c,s,i=a(1),o=a.n(i),d=a(30),l=a.n(d),j=(a(161),a(31)),u=a(191),b=a(192),O=a(10),h=a(2),x=a(17),p=Object(x.c)({name:"alertSlice",initialState:{text:"",show:!1,vatiant:"success"},reducers:{alertSliceHide:function(e){return Object(h.a)(Object(h.a)({},e),{},{text:"",show:!1})},alertSliceSet:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{text:a.text,show:!0,variant:a.variant})}}}),m=p.actions,f=m.alertSliceHide,g=m.alertSliceSet,v=p.reducer,y=a(0),w=function(){var e=Object(O.c)((function(e){return e.alertState})),t=e.show,a=e.text,n=e.variant,r=Object(O.b)();return Object(y.jsx)(u.a,{fluid:!0,className:"position-fixed top-0 left-0 right-0 p-1 m-0",style:{zIndex:1080},children:Object(y.jsx)(b.a,{show:t,variant:n,onClose:function(){return r(f())},dismissible:!0,children:a})})},S=a(205),N=a(145),k=Object(x.c)({name:"authSlice",initialState:{id:null,name:""},reducers:{authSliceLogin:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{id:a._id,name:a.name})},authSliceLogout:function(e){return Object(h.a)(Object(h.a)({},e),{},{id:null})}}}),C=k.actions,F=C.authSliceLogin,P=C.authSliceLogout,L=k.reducer,E=function(){var e=Object(O.b)(),t="drobot-shop-admin",a=Object(i.useCallback)((function(a){var n=a._id,r=a.name,c=a.role;e(F({_id:n,name:r,role:c})),localStorage.setItem(t,JSON.stringify({_id:n,name:r,role:c}))}),[e]),n=Object(i.useCallback)((function(){e(P()),localStorage.removeItem(t)}),[e]);return Object(i.useEffect)((function(){try{var e=JSON.parse(localStorage.getItem(t)),n=e._id,r=e.name,c=e.role;n&&a({_id:n,name:r,role:c})}catch(s){}}),[a]),{login:a,logout:n}},I=function(){var e=Object(O.c)((function(e){return e.authState})),t=e.id,a=e.name,n=E().logout;return t?Object(y.jsxs)(S.a,{bg:"light",expand:"lg",className:"px-1",children:[Object(y.jsx)("span",{className:"text-secondary me-3",children:a}),Object(y.jsx)(j.b,{to:"/admin/main",className:"mx-3",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(y.jsx)(N.a,{variant:"link",className:"ms-auto",onClick:n,children:"\u0412\u044b\u0445\u043e\u0434"})]}):null},A=a(20),R=a(3),_=a(9),T=a.n(_),B=a(14),z=a(6),G=a(204),H=a(193),J=function(){var e=Object(O.b)();return{successAlert:Object(i.useCallback)((function(t){e(g({text:t,variant:"success"}))}),[e]),errorAlert:Object(i.useCallback)((function(t){e(g({text:t,variant:"danger"}))}),[e])}},K=function(){var e=Object(i.useState)(null),t=Object(z.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(!1),c=Object(z.a)(r,2),s=c[0],o=c[1],d=Object(i.useState)(0),l=Object(z.a)(d,2),j=l[0],u=l[1],b=J().errorAlert,h=Object(O.c)((function(e){return e.authState})).id,x=Object(i.useCallback)(function(){var e=Object(B.a)(T.a.mark((function e(t){var a,r,c,s,i,d,l=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{},o(!0),c["Content-Type"]="application/json",c.Authorization="Base ".concat(h),r&&(r=JSON.stringify(r)),e.prev=7,e.next=10,fetch(t,{method:a,body:r,headers:c});case 10:return s=e.sent,e.next=13,s.text();case 13:i=e.sent,e.prev=14,JSON.parse(i),e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(14),new Error("INVALID SERVER RESPONSE");case 21:if(d=JSON.parse(i),s.ok){e.next=24;break}throw new Error(d.message||"SERVER ERROR");case 24:return o(!1),e.abrupt("return",d);case 28:throw e.prev=28,e.t1=e.catch(7),o(!1),n(e.t1.message),e.t1;case 33:case"end":return e.stop()}}),e,null,[[7,28],[14,18]])})));return function(t){return e.apply(this,arguments)}}(),[h]),p=Object(i.useCallback)(function(){var e=Object(B.a)(T.a.mark((function e(t,a,r){var c,s,i,d,l,j,b,O,x,p,m,f,g,v,y,w,S,N=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=N.length>3&&void 0!==N[3]?N[3]:{},s=new FormData,i=0,d=Object.entries(a);i<d.length;i++)l=Object(z.a)(d[i],2),j=l[0],b=l[1],s.append(j,b);for(O in r)x=Object(z.a)(Object.entries(r[O])[0],2),p=x[0],m=x[1],s.append(p,m);for((f=new XMLHttpRequest).open("POST",t),c.Authorization="Base ".concat(h),g=0,v=Object.entries(c);g<v.length;g++)y=Object(z.a)(v[g],2),w=y[0],S=y[1],f.setRequestHeader(w,S);return e.prev=8,e.next=11,new Promise((function(e,t){u(0),o(!0),f.send(s),f.upload.onprogress=function(e){u(parseInt(100*e.loaded/e.total))},f.onreadystatechange=function(){if(4===parseInt(f.readyState)){try{JSON.parse(f.response)}catch(n){t({message:"INVALID SERVER RESPONSE"})}var a=JSON.parse(f.response);parseInt(f.status)<300&&(u(0),o(!1),e(a)),t(a)}}}));case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(8),u(0),o(!1),n(e.t0.message),e.t0;case 20:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[h]),m=Object(i.useCallback)(function(){var e=Object(B.a)(T.a.mark((function e(t){var a,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),(a={}).Authorization="Base ".concat(h),e.prev=3,e.next=6,fetch(t,{method:"GET",body:null,headers:a});case 6:return r=e.sent,e.next=9,r.blob();case 9:if(c=e.sent,r.ok){e.next=12;break}throw new Error(c.message||"SERVER ERROR");case 12:return o(!1),e.abrupt("return",c);case 16:throw e.prev=16,e.t0=e.catch(3),o(!1),n(e.t0.message),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),[h]),f=Object(i.useCallback)((function(){return n(null)}),[]);return Object(i.useEffect)((function(){a&&(b(a),f())}),[a,f,b]),{request:x,sendFormData:p,getFile:m,loading:s,progress:j,error:a,clearError:f}},M=function(){var e=Object(i.useState)({login:"",pass:""}),t=Object(z.a)(e,2),a=t[0],n=t[1],r=K(),c=r.request,s=r.loading,o=E().login,d=function(){var e=Object(B.a)(T.a.mark((function e(t){var n,r,s,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,c("/api/auth/login","POST",a);case 4:n=e.sent,r=n._id,s=n.name,i=n.role,o({_id:r,name:s,role:i}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(u.a,{className:"min-vh-100 d-flex",children:Object(y.jsxs)(G.a,{className:"m-auto col-12 col-md-3",onSubmit:d,children:[Object(y.jsxs)(G.a.Group,{className:"mb-2",children:[Object(y.jsx)(G.a.Label,{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(y.jsx)(G.a.Control,{type:"text",name:"login",value:a.login,onChange:function(e){return n((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(R.a)({},e.target.name,e.target.value))}))}})]}),Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(y.jsx)(G.a.Control,{type:"text",name:"pass",value:a.pass,onChange:function(e){return n((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(R.a)({},e.target.name,e.target.value))}))}})]}),Object(y.jsx)(N.a,{variant:"primary",type:"submit",disabled:s,children:s?Object(y.jsx)(H.a,{animation:"border",variant:"primary",size:"sm"}):"OK"})]})})},V=a(194),D=a(195),q=a(96),Y=function(){return Object(y.jsx)(u.a,{fluid:!0,className:"position-fixed top-0 left-0 bottom-0 m-0 d-flex",style:{zIndex:1060,background:"rgba(255, 255, 255, 0.8)"},children:Object(y.jsx)(H.a,{animation:"border",variant:"secondary",className:"m-auto"})})},U=function(){var e=Object(i.useState)(),t=Object(z.a)(e,2),a=t[0],n=t[1],r=K(),c=r.request,s=r.loading,o=J().successAlert,d=Object(i.useCallback)(Object(B.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/users/get-all");case 3:t=e.sent,n(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[c]),l=function(){var e=Object(B.a)(T.a.mark((function e(t){var a,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.getAttribute("data-id"),e.prev=1,e.next=4,c("/api/users/remove","POST",{id:a});case 4:n=e.sent,r=n.message,o(r),d(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)(d,[d]),Object(y.jsxs)(u.a,{className:"py-4",children:[s&&Object(y.jsx)(Y,{}),Object(y.jsx)("h3",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),!(null===a||void 0===a?void 0:a.length)&&Object(y.jsx)("p",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043f\u0443\u0441\u0442"}),(null===a||void 0===a?void 0:a.length)>0&&Object(y.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"#"}),Object(y.jsx)("th",{children:"\u0418\u043c\u044f"}),Object(y.jsx)("th",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(y.jsx)("th",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(y.jsx)("th",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})}),Object(y.jsx)("tbody",{children:a.map((function(e){var t=e._id,a=e.avatar,n=e.name,r=e.login;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:a&&""!==a&&Object(y.jsx)("img",{alt:"avatar",src:a,width:"40"})}),Object(y.jsx)("td",{children:n}),Object(y.jsx)("td",{children:r}),Object(y.jsx)("td",{children:Object(y.jsx)(j.b,{className:"btn btn-primary",to:"/admin/users/user/".concat(t),children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}),Object(y.jsx)("td",{children:Object(y.jsx)(N.a,{variant:"link",className:"text-danger",onClick:l,"data-id":t,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},t)}))})]}),Object(y.jsx)(D.a,{className:"mt-3",children:Object(y.jsx)(q.a,{sm:12,md:4,children:Object(y.jsx)(j.b,{to:"/admin/users/user",className:"btn btn-primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})})]})},W=function(){var e=Object(B.a)(T.a.mark((function e(t){var a,n,r,c,s,i,o=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,(r=o.length>3&&void 0!==o[3]?o[3]:{})["Content-Type"]="application/json",n&&(n=JSON.stringify(n)),e.prev=5,e.next=8,fetch(t,{method:a,body:n,headers:r});case 8:return c=e.sent,e.next=11,c.text();case 11:s=e.sent,e.prev=12,JSON.parse(s),e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(12),new Error("INVALID SERVER RESPONSE");case 19:if(i=JSON.parse(s),c.ok){e.next=22;break}throw new Error(i.message||"SERVER ERROR");case 22:return e.abrupt("return",i);case 25:throw e.prev=25,e.t1=e.catch(5),e.t1;case 28:case"end":return e.stop()}}),e,null,[[5,25],[12,16]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(B.a)(T.a.mark((function e(t,a,n){var r,c,s,i,o,d,l,j,u,b,O,h,x,p,m,f,g,v=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=v.length>3&&void 0!==v[3]?v[3]:{},c=new FormData,s=0,i=Object.entries(a);s<i.length;s++)o=Object(z.a)(i[s],2),d=o[0],l=o[1],c.append(d,l);for(j in n)u=Object(z.a)(Object.entries(n[j])[0],2),b=u[0],O=u[1],c.append(b,O);for((h=new XMLHttpRequest).open("POST",t),x=0,p=Object.entries(r);x<p.length;x++)m=Object(z.a)(p[x],2),f=m[0],g=m[1],h.setRequestHeader(f,g);return e.prev=7,e.next=10,new Promise((function(e,t){h.send(c),h.onreadystatechange=function(){if(4===parseInt(h.readyState)){try{JSON.parse(h.response)}catch(n){t({message:"INVALID SERVER RESPONSE"})}var a=JSON.parse(h.response);parseInt(h.status)<300&&e(a),t(a)}}}));case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(7),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),$=Object(x.b)("categories/get-all",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/categories/get-all","GET",null,{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Q=Object(x.b)("categories/create",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c,s,i,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a.getState(),c=r.authState,s=r.categoriesState,i={name:s.addForm.name,parent:null===(n=s.selectedCategory)||void 0===n?void 0:n._id},e.next=5,W("/api/categories/create","POST",i,{Authorization:"Base ".concat(c.id)});case 5:return o=e.sent,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Z=Object(x.b)("categories/update-category",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c,s,i,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=a.getState(),r=n.authState,c=n.categoriesState,s={id:c.selectedCategory._id,description:c.form.description},e.t0=c.form.imgSrc,!e.t0){e.next=8;break}return e.next=7,fetch(c.form.imgSrc).then((function(e){return e.blob()}));case 7:e.t0=e.sent;case 8:return i=e.t0,e.next=11,X("/api/categories/update",s,[{cover:i}],{Authorization:"Base ".concat(r.id)});case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t1=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t1.message})),e.t1;case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}()),ee=Object(x.b)("categories/delete-category",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,c=n.categoriesState,e.next=4,W("/api/categories/delete","POST",{id:c.selectedCategory._id},{Authorization:"Base ".concat(r.id)});case 4:return s=e.sent,e.abrupt("return",s);case 8:throw e.prev=8,e.t0=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),te={addForm:{name:""},categories:{_id:"0"},form:{name:"",description:"",imgSrc:null},list:[],loading:!1,modalShow:!1,photo:null,selectedCategory:null},ae=function e(t,a){if(t._id===a)return t;for(var n in t.entries){var r=e(t.entries[n],a);if(r)return r}return null},ne=Object(x.c)({name:"categorySlice",initialState:te,reducers:{addFormNameHandler:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{addForm:Object(h.a)(Object(h.a)({},e.addForm),{},{name:a})})},categoryClickHandler:function(e,t){var a=t.payload,n=ae(e.categories,a),r=null!==n&&void 0!==n?n:{},c=r.name,s=r.description,i=r.imgSrc;return Object(h.a)(Object(h.a)({},e),{},{selectedCategory:n,form:{name:c,description:null!==s&&void 0!==s?s:"",imgSrc:i}})},hideModal:function(e){return Object(h.a)(Object(h.a)({},e),{},{showModal:!1,addForm:te.addForm})},resetCategoriesState:function(){return te},setForm:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{form:Object(h.a)(Object(h.a)({},e.form),{},Object(R.a)({},a.key,a.value))})},setPhoto:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{form:Object(h.a)(Object(h.a)({},e.form),{},{imgSrc:a?URL.createObjectURL(a):null})})},showModal:function(e){return Object(h.a)(Object(h.a)({},e),{},{showModal:!0})}},extraReducers:(n={},Object(R.a)(n,Q.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{showModal:!1,loading:!0})})),Object(R.a)(n,Q.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{loading:!1,categories:Object(h.a)(Object(h.a)({},e.categories),{},{entries:a}),addForm:Object(h.a)(Object(h.a)({},e.addForm),{},{name:""})})})),Object(R.a)(n,Q.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),Object(R.a)(n,ee.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(n,ee.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{loading:!1,categories:Object(h.a)(Object(h.a)({},e.categories),{},{entries:a}),addForm:Object(h.a)(Object(h.a)({},e.addForm),{},{name:""}),selectedCategory:null,form:te.form})})),Object(R.a)(n,ee.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),Object(R.a)(n,$.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(n,$.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{loading:!1,categories:Object(h.a)(Object(h.a)({},e.categories),{},{entries:a})})})),Object(R.a)(n,$.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),Object(R.a)(n,Z.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(n,Z.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{loading:!1,categories:Object(h.a)(Object(h.a)({},e.categories),{},{entries:a})})})),Object(R.a)(n,Z.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1,categories:{_id:"0"}})})),n)}),re=ne.actions,ce=re.addFormNameHandler,se=re.categoryClickHandler,ie=re.hideModal,oe=re.resetCategoriesState,de=(re.setCategories,re.setForm),le=re.setPhoto,je=re.showModal,ue=ne.reducer,be=a(208),Oe=function(){var e=Object(O.c)((function(e){return e.categoriesState})),t=e.addForm,a=e.selectedCategory,n=e.showModal,r=Object(O.b)(),c=function(){r(ie())};return Object(y.jsx)(be.a,{show:n,onHide:c,className:"w-100",children:Object(y.jsxs)(be.a.Dialog,{children:[Object(y.jsx)(be.a.Header,{children:Object(y.jsxs)(be.a.Title,{children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b \u0432 ",(null===a||void 0===a?void 0:a.name)||"\u043a\u043e\u0440\u0435\u043d\u044c \u0441\u0430\u0439\u0442\u0430"]})}),Object(y.jsx)(be.a.Body,{children:Object(y.jsx)(G.a,{children:Object(y.jsxs)(G.a.Group,{children:[Object(y.jsx)(G.a.Label,{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{value:t.name,onChange:function(e){r(ce(e.target.value))}})]})})}),Object(y.jsxs)(be.a.Footer,{children:[Object(y.jsx)(N.a,{variant:"secondary",onClick:c,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(y.jsx)(N.a,{variant:"primary",onClick:function(){r(Q())},children:"OK"})]})]})})},he=a(212),xe=function(){return Object(y.jsxs)("ul",{className:"w-100",children:[Object(y.jsx)(he.a,{as:"li",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100"})}),Object(y.jsx)(he.a,{as:"li",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100"})}),Object(y.jsxs)(he.a,{as:"li",animation:"glow",xs:12,children:[Object(y.jsx)(he.a,{xs:12,className:"rounded h-100"}),Object(y.jsxs)("ul",{className:"w-100",children:[Object(y.jsx)(he.a,{as:"li",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100"})}),Object(y.jsx)(he.a,{as:"li",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100"})})]})]}),Object(y.jsx)(he.a,{as:"li",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100"})})]})},pe=a(216),me=a(209),fe=a(99),ge=a.n(fe),ve=a(100),ye=a.n(ve),we=function(){var e,t=Object(O.c)((function(e){return e.categoriesState})).categories,a=Object(O.b)();return(null===(e=t.entries)||void 0===e?void 0:e.length)>0?Object(y.jsx)(pe.a,{"aria-label":"rich object",defaultCollapseIcon:Object(y.jsx)(ge.a,{}),defaultExpanded:["0"],defaultExpandIcon:Object(y.jsx)(ye.a,{}),onNodeSelect:function(e,t){a(se(t))},sx:{height:"100%",flexGrow:1,maxWidth:"100%",overflowY:"auto"},children:function e(t){return Object(y.jsx)(me.a,{nodeId:t._id,label:t.name,children:Array.isArray(t.entries)?t.entries.map((function(t){return e(t)})):null},t._id)}(t)}):Object(y.jsx)("p",{className:"text-center",children:"\u041a\u0430\u0440\u0442\u0430 \u0441\u0430\u0439\u0442\u0430 \u043f\u0443\u0441\u0442\u0430"})},Se=function(){var e=Object(O.c)((function(e){return e.categoriesState})).loading,t=Object(O.b)();return Object(i.useEffect)((function(){t($())}),[t]),e?Object(y.jsx)(xe,{}):Object(y.jsx)(we,{})},Ne=a(210),ke=a(214),Ce=a(199),Fe=a(92),Pe=a(108),Le=a.n(Pe),Ee=function(){var e,t=Object(O.c)((function(e){return e.categoriesState})),a=t.loading,n=t.selectedCategory,r=t.form,c=Object(O.b)();return a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(he.a,{as:"p",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100 mx-auto"})}),Object(y.jsx)(he.a,{animation:"glow",xs:12,children:Object(y.jsx)(he.a.Button,{xs:12,className:"mb-2"})}),Object(y.jsx)(he.a,{animation:"glow",xs:12,children:Object(y.jsx)(he.a.Button,{xs:12,className:"mb-2"})}),Object(y.jsx)(he.a,{animation:"glow",xs:12,className:"w-100 mt-auto",children:Object(y.jsx)(he.a.Button,{variant:"warning",xs:12,className:"mb-2"})})]}):Object(y.jsxs)("div",{className:"d-flex flex-column h-100",children:[Object(y.jsx)("p",{className:"text-center mb-3",children:null!==(e=null===n||void 0===n?void 0:n.name)&&void 0!==e?e:"\u0420\u0430\u0437\u0434\u0435\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"}),n&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(Ne.a,{defaultActiveKey:"wrap",children:[Object(y.jsx)(ke.a,{eventKey:"wrap",title:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430",children:Object(y.jsxs)(D.a,{className:"border border-top-0 rounded-bottom p-3 gx-2 m-0 align-items-stretch",children:[Object(y.jsx)(q.a,{sm:12,md:8,children:Object(y.jsxs)(G.a,{children:[Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{type:"text",readOnly:!0,placeholder:r.name})]}),Object(y.jsxs)(G.a.Group,{children:[Object(y.jsx)(G.a.Label,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{as:"textarea",rows:3,value:r.description,name:"description",onChange:function(e){c(de({key:e.target.name,value:e.target.value}))}})]})]})}),Object(y.jsx)(q.a,{sm:12,md:4,className:"d-flex",children:r.imgSrc?Object(y.jsxs)("div",{className:"position-relative",children:[Object(y.jsx)(Ce.a,{src:r.imgSrc,fluid:!0}),Object(y.jsx)(Fe.a,{className:"position-absolute top-0 end-0 bg-light m-1",onClick:function(){c(le())}})]}):Object(y.jsxs)("label",{className:"m-auto w-100 d-flex",children:[Object(y.jsx)("input",{type:"file",style:{width:0,height:0,padding:0,margin:0},onInput:function(e){c(le(e.target.files[0]))},accept:"image/*"}),Object(y.jsx)(Le.a,{className:"m-auto text-secondary",sx:{fontSize:80}})]})})]})}),Object(y.jsx)(ke.a,{eventKey:"fields",title:"\u041f\u043e\u043b\u044f"})]}),Object(y.jsxs)("div",{className:"mt-auto w-100 d-flex justify-content-between",children:[Object(y.jsx)(N.a,{variant:"link",onClick:function(){c(ee())},className:"text-danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(y.jsx)(N.a,{variant:"primary",onClick:function(){c(Z())},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})},Ie=function(){var e=Object(O.b)();return Object(i.useEffect)((function(){return function(){return e(oe())}}),[e]),Object(y.jsxs)(u.a,{fluid:!0,children:[Object(y.jsx)(Oe,{}),Object(y.jsxs)(u.a,{className:"py-4",children:[Object(y.jsxs)(D.a,{className:"mb-3",children:[Object(y.jsx)(q.a,{children:Object(y.jsx)("span",{className:"fs-3",children:"\u0420\u0430\u0437\u0434\u0435\u043b\u044b \u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(y.jsx)(q.a,{className:"d-flex justify-content-end",children:Object(y.jsx)(N.a,{variant:"success",onClick:function(){e(je())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b"})})]}),Object(y.jsxs)(D.a,{className:"border px-2 py-4 bg-light rounded align-items-stretch",children:[Object(y.jsx)(q.a,{xs:12,md:5,children:Object(y.jsx)(u.a,{style:{height:"70vh"},className:"bg-white rounded border overflow-scroll py-2",children:Object(y.jsx)(Se,{})})}),Object(y.jsx)(q.a,{xs:12,md:7,children:Object(y.jsx)(u.a,{className:"bg-white rounded border py-2 h-100 pe-2",style:{overflowY:"scroll"},children:Object(y.jsx)(Ee,{})})})]})]})]})},Ae=a(203),Re=a(202),_e="primary",Te="secondary",Be="success",ze=Object(x.b)("goods/get-all",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/goods/get-all","GET",null,{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Ge=Object(x.b)("goods/update-good",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(T.a.mark((function e(){var t,n,r,c,s,i,o,d;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.getState(),n=t.authState,r=t.goodsState,c={id:r.selectedProduct._id,deleted:JSON.stringify(r.deletedPhotos),description:r.form.description,photos:JSON.stringify(r.photos)},s=[],i=T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,fetch(r.addedPhotos[t]).then(function(){var e=Object(B.a)(T.a.mark((function e(a){var n,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.blob();case 2:return n=e.sent,c=new File([n],r.addedPhotos[t],{type:n.type}),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:e.t1=e.sent,e.t2={img:e.t1},e.t0.push.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e)})),e.t0=T.a.keys(r.addedPhotos);case 5:if((e.t1=e.t0()).done){e.next=10;break}return o=e.t1.value,e.delegateYield(i(o),"t2",8);case 8:e.next=5;break;case 10:return e.next=12,X("/api/goods/update",c,s,{Authorization:"Base ".concat(n.id)});case 12:return d=e.sent,e.abrupt("return",{v:d});case 14:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:if("object"!==typeof(n=e.t0)){e.next=5;break}return e.abrupt("return",n.v);case 5:e.next=13;break;case 7:throw e.prev=7,e.t1=e.catch(0),console.log(e.t1),(0,a.dispatch)(g({variant:"danger",text:e.t1.message})),e.t1;case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()),He=Object(x.b)("goods/sync",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/goods/moy-sklad-sync","POST",null,{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Je=Object(x.b)("/goods/removePhoto",function(){var e=Object(B.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,400)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ke=Object(x.b)("/goods/recoverPhoto",function(){var e=Object(B.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,400)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Me=function e(t,a){var n;if((null===(n=t._id)||void 0===n?void 0:n.toString())===(null===a||void 0===a?void 0:a.toString()))return t;for(var r in t.entries){var c=e(t.entries[r],a);if(c)return c}return null},Ve={activeTab:"wrap",addedPhotos:[],deletedPhotos:[],form:{name:"",description:""},goods:{_id:"0"},loadedPhotos:[],loading:!1,photos:[],selectedProduct:null},De=Object(x.c)({name:"goodsSlice",initialState:Ve,reducers:{addPhotos:function(e,t){var a=t.payload,n=a.map((function(e){return{variant:Be,src:e,added:!0}}));return Object(h.a)(Object(h.a)({},e),{},{addedPhotos:e.addedPhotos.concat(a),photos:e.photos.concat(n)})},moveImg:function(e,t){var a=t.payload,n=a.hoverIndex,r=a.moveIndex,c=e.photos.map((function(e){return e})),s=c.splice(r,1);return c.splice(n,0,s[0]),Object(h.a)(Object(h.a)({},e),{},{photos:c})},productClickHandler:function(e,t){var a=t.payload,n=Me(e.goods,a),r=n.name,c=n.description,s=n.images;return n.isGood?Object(h.a)(Object(h.a)({},e),{},{selectedProduct:n,form:Object(h.a)(Object(h.a)({},e.form),{},{name:r,description:null!==c&&void 0!==c?c:""}),loadedPhotos:s,photos:s.map((function(e){return{variant:_e,src:e}})),deletedPhotos:[],activeTab:Ve.activeTab}):Object(h.a)(Object(h.a)({},e),{},{selectedProduct:null,form:Ve.form,loadedPhotos:[],photos:[],activeTab:Ve.activeTab})},setForm:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{form:Object(h.a)(Object(h.a)({},e.form),{},Object(R.a)({},a.name,a.value))})},tabChange:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{activeTab:a})},resetGoods:function(){return Ve}},extraReducers:(r={},Object(R.a)(r,ze.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(r,ze.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{goods:Object(h.a)(Object(h.a)({},e.goods),{},{entries:a}),loading:!1})})),Object(R.a)(r,ze.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),Object(R.a)(r,He.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(r,He.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{goods:Object(h.a)(Object(h.a)({},e.goods),{},{entries:a}),loading:!1})})),Object(R.a)(r,He.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),Object(R.a)(r,Ke.pending,(function(e,t){var a=t.meta;return Object(h.a)(Object(h.a)({},e),{},{photos:e.photos.map((function(e,t){return t===parseInt(a.arg.idx)?Object(h.a)(Object(h.a)({},e),{},{classList:"opacity-decrease"}):e}))})})),Object(R.a)(r,Ke.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{deletedPhotos:e.deletedPhotos.filter((function(t){return t!==e.photos[a].src})),photos:e.photos.map((function(e,t){return parseInt(a)===t?Object(h.a)(Object(h.a)({},e),{},{variant:_e,classList:null}):e}))})})),Object(R.a)(r,Je.pending,(function(e,t){var a=t.meta;return Object(h.a)(Object(h.a)({},e),{},{photos:e.photos.map((function(e,t){return t===parseInt(a.arg.idx)?Object(h.a)(Object(h.a)({},e),{},{classList:"opacity-decrease"}):e}))})})),Object(R.a)(r,Je.fulfilled,(function(e,t){var a=t.payload,n=a.idx;return"true"===a.loaded?Object(h.a)(Object(h.a)({},e),{},{deletedPhotos:e.deletedPhotos.concat([e.photos[parseInt(n)].src]),photos:e.photos.map((function(e,t){return parseInt(n)===t?Object(h.a)(Object(h.a)({},e),{},{variant:Te,classList:null}):e}))}):Object(h.a)(Object(h.a)({},e),{},{addedPhotos:e.addedPhotos.filter((function(t){return t!==e.photos[parseInt(n)].src})),photos:e.photos.filter((function(e,t){return parseInt(n)!==t}))})})),Object(R.a)(r,Ge.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(r,Ge.fulfilled,(function(e,t){var a=t.payload,n=e.selectedProduct._id,r=Me(Object(h.a)(Object(h.a)({},Ve.goods),{},{entries:a}),n.toString()),c=r.name,s=r.description,i=r.images;return Object(h.a)(Object(h.a)({},e),{},{selectedProduct:r,goods:Object(h.a)(Object(h.a)({},Ve.goods),{},{entries:a}),form:Object(h.a)(Object(h.a)({},e.form),{},{name:c,description:null!==s&&void 0!==s?s:""}),loadedPhotos:i,photos:i.map((function(e){return{variant:_e,src:e}})),addedPhotos:[],deletedPhotos:[],loading:!1})})),Object(R.a)(r,Ge.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),r)}),qe=De.actions,Ye=qe.addPhotos,Ue=qe.moveImg,We=qe.productClickHandler,Xe=qe.resetGoods,$e=qe.setForm,Qe=(qe.setPhotoState,qe.tabChange),Ze=De.reducer,et=a(201),tt=a(149),at=a(213),nt=a(206),rt=a(207),ct=function(e){var t=e.variant,a=e.src,n=e.index,r=e.classList,c=Object(O.b)(),s=Object(i.useRef)(null),o=Object(nt.a)({accept:"card",hover:function(e){if(s.current){var t=e.index,a=n;t!==a&&(c(Ue({moveIndex:t,hoverIndex:a})),e.index=a)}}}),d=Object(z.a)(o,2),l=(d[0],d[1]),j=Object(rt.a)({type:"card",item:{index:n}}),u=Object(z.a)(j,2);u[0];return(0,u[1])(l(s)),Object(y.jsxs)(at.a,{bg:t,text:"white",className:"h-100 border-0 ".concat(r||""),ref:s,children:[t===Be&&Object(y.jsx)(at.a.Header,{children:"\u041d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"}),t===_e&&Object(y.jsx)(at.a.Header,{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e"}),t===Te&&Object(y.jsx)(at.a.Header,{children:"\u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u043e"}),Object(y.jsxs)(at.a.Body,{className:"position-relative d-flex product-image p-0 border-none",children:[Object(y.jsx)(Ce.a,{src:a,fluid:!0,className:"rounded-bottom"}),t===Te?Object(y.jsx)("button",{className:"btn position-absolute center bg-white p-0 m-2 px-1 opacity-0","data-index":n,onClick:function(e){c(Ke(e.target.dataset.index))},children:Object(y.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-clockwise",viewBox:"0 0 16 16","data-index":n,children:[Object(y.jsx)("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),Object(y.jsx)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})}):Object(y.jsx)(Fe.a,{className:"position-absolute center bg-light m-2 opacity-0","data-index":n,onClick:function(e){c(Je({idx:e.target.dataset.index,loaded:e.target.dataset.loaded}))},"data-loaded":"primary"===t})]})]})},st=function(){var e=Object(O.c)((function(e){return e.goodsState})),t=e.loading,a=e.photos,n=Object(O.b)();return t?Object(y.jsx)(D.a,{md:3,className:"border border-top-0 rounded-bottom g-2 m-0 align-items-stretch",children:Object(y.jsx)(q.a,{children:Object(y.jsx)("div",{style:{minHeight:"10vh"},className:"rounded",children:Object(y.jsx)(he.a,{xs:12})})})}):Object(y.jsxs)(D.a,{md:3,className:"border border-top-0 rounded-bottom g-2 m-0 align-items-stretch p-2",children:[a.map((function(e,t){var a=e.variant,n=e.src,r=e.classList;return Object(y.jsx)(q.a,{style:{minHeight:"20vh"},children:Object(y.jsx)(ct,{classList:r,variant:a,src:n,index:t})},"$_image_".concat(t))})),Object(y.jsx)(q.a,{children:Object(y.jsxs)(at.a,{className:"h-100",children:[Object(y.jsx)(at.a.Header,{children:Object(y.jsxs)("label",{className:"text-primary",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e...",!t&&Object(y.jsx)("input",{type:"file",style:{width:0,height:0,padding:0,margin:0},onInput:function(e){var t=Array.from(e.target.files).map((function(e){return URL.createObjectURL(e)}));n(Ye(t))},accept:"image/*",multiple:!0})]})}),Object(y.jsx)(at.a.Body,{className:"d-flex",children:Object(y.jsx)(Le.a,{className:"m-auto text-secondary",sx:{fontSize:80}})})]})})]})},it=function(){var e,t=Object(O.c)((function(e){return e.goodsState})),a=t.activeTab,n=t.form,r=t.loading,c=t.selectedProduct,s=Object(O.b)(),i=function(e){s(Qe(e))};return r?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(he.a,{as:"p",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded h-100 mx-auto"})}),Object(y.jsx)(he.a,{animation:"glow",xs:12,children:Object(y.jsx)(he.a.Button,{xs:12,className:"mb-2"})}),Object(y.jsx)(he.a,{animation:"glow",xs:12,children:Object(y.jsx)(he.a.Button,{xs:12,className:"mb-2"})}),Object(y.jsx)(he.a,{animation:"glow",xs:12,className:"w-100 mt-auto",children:Object(y.jsx)(he.a.Button,{variant:"warning",xs:12,className:"mb-2"})})]}):Object(y.jsxs)("div",{className:"d-flex flex-column h-100",children:[Object(y.jsx)("p",{className:"text-center mb-3",children:null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"}),c&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(Ne.a,{activeKey:a,onSelect:i,children:[Object(y.jsx)(ke.a,{eventKey:"wrap",title:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430",className:"mb-3",children:Object(y.jsx)(D.a,{className:"border border-top-0 rounded-bottom p-3 gx-2 m-0 align-items-stretch",children:Object(y.jsx)(q.a,{sm:12,children:Object(y.jsxs)(G.a,{children:[Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{type:"text",readOnly:!0,placeholder:n.name})]}),Object(y.jsxs)(G.a.Group,{children:[Object(y.jsx)(G.a.Label,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{as:"textarea",rows:3,value:n.description,name:"description",onChange:function(e){s($e({name:e.target.name,value:e.target.value}))}})]})]})})})}),Object(y.jsx)(ke.a,{eventKey:"photos",title:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",className:"mb-3",onSelect:i,children:Object(y.jsx)(et.a,{backend:tt.a,children:Object(y.jsx)(st,{})})}),Object(y.jsx)(ke.a,{eventKey:"fields",title:"\u041f\u043e\u043b\u044f",className:"mb-3",onSelect:i})]}),Object(y.jsx)("div",{className:"mt-auto ms-auto",children:Object(y.jsx)(N.a,{variant:"primary",onClick:function(){s(Ge())},disabled:!c||r,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})},ot=function(){var e=Object(O.c)((function(e){return e.goodsState})),t=e.goods,a=e.loading,n=Object(O.b)();return a?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(he.a,{as:"p",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded w-100 h-100"})}),Object(y.jsx)(he.a,{as:"p",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded w-100 h-100"})}),Object(y.jsx)(he.a,{as:"p",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded w-100 h-100"})}),Object(y.jsx)(he.a,{as:"p",animation:"glow",xs:12,children:Object(y.jsx)(he.a,{xs:12,className:"rounded w-100 h-100"})})]}):Object(y.jsx)(pe.a,{"aria-label":"rich object",defaultCollapseIcon:Object(y.jsx)(ge.a,{}),defaultExpanded:["0"],defaultExpandIcon:Object(y.jsx)(ye.a,{}),onNodeSelect:function(e,t){n(We(t))},sx:{height:"100%",flexGrow:1,maxWidth:"100%",overflowY:"auto"},children:function e(t){return Object(y.jsx)(me.a,{nodeId:t._id,label:t.name,children:Array.isArray(t.entries)?t.entries.map((function(t){return e(t)})):null},t._id)}(t)})},dt=function(){var e=Object(O.c)((function(e){return e.goodsState})).loading,t=Object(O.b)();return Object(i.useEffect)((function(){return t(ze()),function(){return t(Xe())}}),[t]),Object(y.jsxs)(u.a,{className:"py-4",children:[Object(y.jsxs)(D.a,{className:"mb-3",children:[Object(y.jsx)(q.a,{children:Object(y.jsx)("span",{className:"fs-3",children:"\u0422\u043e\u0432\u0430\u0440\u044b"})}),Object(y.jsx)(q.a,{className:"d-flex justify-content-end",children:Object(y.jsx)(Ae.a,{placement:"bottom",delay:{show:200,hide:200},overlay:Object(y.jsx)(Re.a,{children:'\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0438\u0437 \u041f\u0422\u041a "\u041c\u043e\u0439 \u0441\u043a\u043b\u0430\u0434". \u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0438 \u0446\u0435\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u043e\u0432.'}),children:Object(y.jsx)(N.a,{variant:"success",onClick:function(){t(He())},disabled:e,children:'\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 "\u041c\u043e\u0439 \u0441\u043a\u043b\u0430\u0434"'})})})]}),Object(y.jsxs)(D.a,{className:"border px-2 py-4 bg-light rounded align-items-stretch",children:[Object(y.jsx)(q.a,{xs:12,md:5,children:Object(y.jsx)(u.a,{style:{height:"70vh"},className:"bg-white rounded border overflow-scroll py-2",children:Object(y.jsx)(ot,{})})}),Object(y.jsx)(q.a,{xs:12,md:7,children:Object(y.jsx)(u.a,{className:"bg-white rounded border py-2 h-100 pe-2",style:{overflowY:"scroll"},children:Object(y.jsx)(it,{})})})]})]})},lt=a(215),jt=function(){var e=Object(i.useState)({avatar:"",name:"",login:"",pass:""}),t=Object(z.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)([{name:"users",view:!1,edit:!1,title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"},{name:"categories",view:!1,edit:!1,title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"},{name:"goods",view:!1,edit:!1,title:"\u0422\u043e\u0432\u0430\u0440\u044b"}]),c=Object(z.a)(r,2),s=c[0],o=c[1],d=Object(i.useState)(!1),l=Object(z.a)(d,2),b=l[0],O=l[1],x=K(),p=x.request,m=x.loading,f=J().successAlert,g=Object(A.g)(),v=Object(i.useCallback)(function(){var e=Object(B.a)(T.a.mark((function e(t){var a,r,c,s,i,d;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,p("/api/users/get-by-id","POST",{id:t});case 4:a=e.sent,r=a.user,c=a.rights,s=r.avatar,i=r.name,d=r.login,n((function(e){return Object(h.a)(Object(h.a)({},e),{},{avatar:s,name:i,login:d})})),o((function(e){return e.map((function(e){var t,a=null!==(t=c[e.name])&&void 0!==t?t:{view:!1,edit:!1},n=a.view,r=a.edit;return Object(h.a)(Object(h.a)({},e),{},{view:n,edit:r})}))})),O(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),O(!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),[p]),w=function(e){var t=e.target.getAttribute("data-name"),a=e.target.getAttribute("data-value"),n=e.target.checked;o((function(e){return e.map((function(e){return e.name===t?Object(h.a)(Object(h.a)({},e),{},Object(R.a)({},a,n)):e}))}))},S=function(){var e=Object(B.a)(T.a.mark((function e(){var t,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("/api/users/create","POST",{form:a,rights:s});case 3:t=e.sent,r=t.message,f(r),n({avatar:"",name:"",login:"",pass:""}),o([{name:"users",view:!1,edit:!1,title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"},{name:"categories",view:!1,edit:!1,title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"},{name:"goods",view:!1,edit:!1,title:"\u0422\u043e\u0432\u0430\u0440\u044b"}]),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(B.a)(T.a.mark((function e(t){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("/api/users/update","POST",{id:t,form:a,rights:s});case 3:n=e.sent,r=n.message,f(r),v(t),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){"id"in g&&v(g.id)}),[g,v]),Object(y.jsxs)(u.a,{className:"pt-4",children:[g.id?Object(y.jsx)("h3",{children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}):Object(y.jsx)("h3",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(y.jsxs)(D.a,{className:"my-3",children:[Object(y.jsx)(q.a,{sm:12,md:5,children:Object(y.jsxs)(G.a,{children:[Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),b?Object(y.jsx)(he.a,{as:"p",animation:"wave",children:Object(y.jsx)(he.a,{xs:12,className:"p-3 rounded",bg:"secondary"})}):Object(y.jsx)(G.a.Control,{type:"text",name:"name",value:a.name,onChange:function(e){return n((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(R.a)({},e.target.name,e.target.value))}))}})]}),Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041b\u043e\u0433\u0438\u043d"}),b?Object(y.jsx)(he.a,{as:"p",animation:"wave",children:Object(y.jsx)(he.a,{xs:12,className:"p-3 rounded",bg:"secondary"})}):Object(y.jsx)(G.a.Control,{type:"text",name:"login",value:a.login,onChange:function(e){return n((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(R.a)({},e.target.name,e.target.value))}))}})]}),Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),b?Object(y.jsx)(he.a,{as:"p",animation:"wave",children:Object(y.jsx)(he.a,{xs:12,className:"p-3 rounded",bg:"secondary"})}):Object(y.jsx)(G.a.Control,{type:"text",name:"pass",value:a.pass,onChange:function(e){return n((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(R.a)({},e.target.name,e.target.value))}))}})]})]})}),Object(y.jsxs)(q.a,{sm:12,md:{span:5,offset:1},children:[Object(y.jsx)("p",{className:"mb-2",children:"\u041f\u0440\u0430\u0432\u0430"}),Object(y.jsx)(lt.a,{children:s.map((function(e){var t=e.name,a=e.title,n=e.view,r=e.edit;return Object(y.jsxs)(lt.a.Item,{children:[Object(y.jsx)("p",{className:"mb-1 fw-bold",children:a}),Object(y.jsx)(G.a,{children:b?Object(y.jsx)(he.a,{as:"p",animation:"wave",children:Object(y.jsx)(he.a,{xs:12,md:6,className:"p-3 rounded",bg:"secondary"})}):Object(y.jsxs)("div",{children:[Object(y.jsx)(G.a.Check,{inline:!0,type:"checkbox",label:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",checked:n,className:"me-4","data-name":t,"data-value":"view",onChange:w,disabled:r}),Object(y.jsx)(G.a.Check,{inline:!0,type:"checkbox",label:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435",checked:r,"data-name":t,"data-value":"edit",onChange:w,disabled:!n})]})})]},"key_".concat(t))}))})]})]}),Object(y.jsxs)(D.a,{children:[Object(y.jsx)(q.a,{children:b?Object(y.jsx)(he.a.Button,{variant:"primary",xs:2}):Object(y.jsx)(N.a,{variant:"primary",type:"button",onClick:m?null:function(){g.id?k(g.id):S()},children:m?Object(y.jsx)(H.a,{animation:"border",variant:"primary",size:"sm"}):"OK"})}),Object(y.jsx)(q.a,{children:Object(y.jsx)(j.b,{to:"/admin/users",children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"})})]})]})},ut=function(){var e=Object(O.c)((function(e){return e.categoriesState})),t=e.selectedCategory,a=e.form,n=Object(O.b)();return Object(y.jsxs)(u.a,{className:"py-4",children:[Object(y.jsxs)("h3",{children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0430 \u0432 ",null===t||void 0===t?void 0:t.name]}),Object(y.jsxs)(Ne.a,{defaultActiveKey:"props",children:[Object(y.jsx)(ke.a,{eventKey:"props",title:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430",children:Object(y.jsxs)(D.a,{className:"border border-top-0 rounded-bottom p-3 m-0",children:[Object(y.jsx)(q.a,{xs:"12",md:"6",children:Object(y.jsxs)(G.a,{style:{height:"60vh",overflowY:"scroll"},children:[Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{type:"text"})]}),Object(y.jsxs)(G.a.Group,{className:"mb-3",children:[Object(y.jsx)(G.a.Label,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(y.jsx)(G.a.Control,{as:"textarea",rows:"6"})]})]})}),Object(y.jsx)(q.a,{xs:"12",md:{span:5,offset:1},children:Object(y.jsxs)(at.a,{children:[Object(y.jsx)(at.a.Img,{variant:"top",height:"330",className:"bg-light",src:a.imgSrc}),Object(y.jsxs)(at.a.Body,{children:[Object(y.jsx)(at.a.Text,{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(y.jsxs)("label",{className:"btn btn-primary",children:[Object(y.jsx)("input",{type:"file",style:{width:0,height:0,margin:0,padding:0},accept:"image/jpeg",onInput:function(e){n(le(e.target.files[0]))}}),"\u0418\u043c\u0437\u0435\u043d\u0438\u0442\u044c"]})]})]})})]})}),Object(y.jsx)(ke.a,{eventKey:"fileds",title:"\u041f\u043e\u043b\u044f",disabled:!0,children:"\u041f\u043e\u043b\u044f"})]}),Object(y.jsxs)(D.a,{className:"mt-4 ps-4",children:[Object(y.jsx)(q.a,{children:Object(y.jsx)(N.a,{variant:"primary",children:"OK"})}),Object(y.jsx)(q.a,{className:"d-flex",children:Object(y.jsx)(j.b,{to:"/admin/categories",className:"mx-auto text-center",children:"\u041d\u0430\u0437\u0430\u0434 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439..."})})]})]})},bt=function(e){var t=e.header,a=e.body,n=e.link,r=e.border;return Object(y.jsx)(q.a,{children:Object(y.jsxs)(at.a,{border:r,className:"h-100",children:[Object(y.jsx)(at.a.Header,{children:t}),Object(y.jsx)(at.a.Body,{children:a}),Object(y.jsx)(at.a.Footer,{children:Object(y.jsx)(j.b,{to:n,children:"\u0414\u0435\u0442\u0430\u043b\u0438..."})})]})})},Ot=function(){return Object(y.jsx)(u.a,{className:"py-4",children:Object(y.jsxs)(D.a,{xs:1,md:3,className:"g-4 align-items-stretch",children:[Object(y.jsx)(bt,{header:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",body:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0434\u043e\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u043a \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c",link:"/admin/users",border:"primary"}),Object(y.jsx)(bt,{header:"\u041f\u043e\u043b\u044f",body:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u0435\u0439 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438",link:"/admin/fields",border:"success"}),Object(y.jsx)(bt,{header:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",body:"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435",link:"/admin/categories",border:"warning"}),Object(y.jsx)(bt,{header:"\u0422\u043e\u0432\u0430\u0440\u044b",body:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0438\u0437\u0434\u0435\u043b\u0438\u044f\u0445, \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0430\u0445 \u0438 \u0446\u0435\u043d\u0430\u0445",link:"/admin/goods",border:"danger"}),Object(y.jsx)(bt,{header:"\u0422\u0440\u0430\u043d\u0441\u0444\u0435\u0440",body:"\u0418\u043c\u043f\u043e\u0440\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0438\u0437 \u041f\u0422\u041a '\u041c\u043e\u0439 \u0441\u043a\u043b\u0430\u0434' \u0432 \u043a\u0430\u0440\u0442\u0443 \u0441\u0430\u0439\u0442\u0430",link:"/admin/transfer",border:"dark"})]})})},ht=Object(x.b)("fields/get-all",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/fields/get-all","GET",null,{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),xt=Object(x.b)("fields/save",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c,s,i,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,c=n.fieldsState,s=c.addedFields,i=c.removedFields,e.next=5,W("/api/fields/save","POST",{addedFields:s,removedFields:i},{Authorization:"Base ".concat(r.id)});case 5:return o=e.sent,e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),pt=Object(x.c)({name:"fieldsSlice",initialState:{fields:[],addForm:{name:"",type:"number"},addedFields:[],removedFields:[],loading:!1},reducers:{addFormHandler:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{addForm:Object(h.a)(Object(h.a)({},e.addForm),{},Object(R.a)({},a.field,a.value))})},addField:function(e){return Object(h.a)(Object(h.a)({},e),{},{addedFields:e.addedFields.concat(Object(h.a)({},e.addForm)),addForm:{name:"",type:"number"}})},removeField:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{removedFields:e.removedFields.concat(a)})},cancelRemove:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{removedFields:e.removedFields.filter((function(e){return e.toString()!==a.toString()}))})},cancelAdd:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{addedFields:e.addedFields.filter((function(e,t){return t.toString()!==a.toString()}))})}},extraReducers:(c={},Object(R.a)(c,ht.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(c,ht.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{fields:a,loading:!1})})),Object(R.a)(c,ht.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),Object(R.a)(c,xt.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),Object(R.a)(c,xt.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{fields:a,loading:!1,addedFields:[],removedFields:[]})})),Object(R.a)(c,xt.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!1})})),c)}),mt=pt.actions,ft=mt.addFormHandler,gt=mt.addField,vt=mt.removeField,yt=mt.cancelRemove,wt=mt.cancelAdd,St=pt.reducer,Nt=function(){var e=Object(O.c)((function(e){return e.fieldsState})),t=e.addForm,a=e.addedFields,n=e.fields,r=e.removedFields,c=e.loading,s=Object(O.b)(),o=function(e){s(ft({field:e.target.name,value:e.target.value}))},d=function(e){s(vt(e.target.getAttribute("data-id")))},l=function(e){s(yt(e.target.getAttribute("data-id")))},j=function(e){s(wt(e.target.getAttribute("data-id")))};return Object(i.useEffect)((function(){s(ht())}),[s]),Object(y.jsxs)(u.a,{className:"py-4",children:[Object(y.jsx)("h3",{children:"\u041f\u043e\u043b\u044f"}),c&&Object(y.jsx)(D.a,{xs:1,md:3,className:"g-3 mb-3",children:new Array(9).fill(!0).map((function(e,t){return Object(y.jsx)(q.a,{children:Object(y.jsx)(he.a,{as:"p",animation:"glow",className:"m-0 p-0 rounded",children:Object(y.jsx)(he.a,{xs:12,className:"rounded p-4"})})},"ph_".concat(t))}))}),c&&Object(y.jsx)(he.a,{animation:"glow",children:Object(y.jsx)(he.a.Button,{xs:12,md:2})}),!c&&Object(y.jsxs)(V.a,{className:"mb-3",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:"text-center",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f"}),Object(y.jsx)("th",{className:"text-center",children:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(y.jsx)("th",{className:"text-center",children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})]})}),Object(y.jsxs)("tbody",{children:[n.map((function(e){var t=e._id,a=e.name,n=e.type,c=r.some((function(e){return e.toString()===t.toString()}));return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:c?"text-muted":"",children:a}),Object(y.jsx)("td",{className:c?"text-muted text-center":"text-center",children:[{key:"number",value:"\u0427\u0438\u0441\u043b\u043e\u0432\u043e\u0439"},{key:"text",value:"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439"}].filter((function(e){return e.key===n})).map((function(e){return Object(y.jsx)("span",{children:e.value},t+e.key)}))}),Object(y.jsx)("td",{className:"text-center",children:Object(y.jsx)(N.a,{size:"sm","data-id":t,variant:c?"success":"danger",onClick:c?l:d,children:c?Object(y.jsx)(y.Fragment,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}):Object(y.jsx)(y.Fragment,{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})})]},t)})),a.map((function(e,t){var a=e.name,n=e.type;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:a}),Object(y.jsx)("td",{className:"text-center",children:[{key:"number",value:"\u0427\u0438\u0441\u043b\u043e\u0432\u043e\u0439"},{key:"text",value:"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439"}].filter((function(e){return e.key===n})).map((function(e){return Object(y.jsx)("span",{children:e.value},t+e.key)}))}),Object(y.jsx)("td",{className:"text-center",children:Object(y.jsx)(N.a,{variant:"secondary",size:"sm","data-id":t,onClick:j,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]},"key_".concat(t))}))]}),Object(y.jsx)("tfoot",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)(G.a.Control,{type:"text",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",value:t.name,onChange:o,name:"name"})}),Object(y.jsx)("td",{children:Object(y.jsxs)(G.a.Select,{value:t.type,onChange:o,name:"type",children:[Object(y.jsx)("option",{value:"number",children:"\u0427\u0438\u0441\u043b\u043e\u0432\u043e\u0439"}),Object(y.jsx)("option",{value:"text",children:"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0439"})]})}),Object(y.jsx)("td",{className:"text-center",children:Object(y.jsx)(N.a,{variant:"primary",size:"sm",onClick:function(){s(gt())},disabled:""===t.name,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u0435"})})]})})]}),!c&&Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{variant:"primary",onClick:function(){s(xt())},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})},kt=Object(x.b)("/transfer/getCategory",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/categories/category-by-id","POST",t?{id:t}:null,{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Ct=Object(x.b)("/transfer/getParentCategory",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/categories/parent-category","POST",{id:t},{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Ft=Object(x.b)("/transfer/getCatalog",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/categories/catalog-by-id","POST",t?{id:t}:null,{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Pt=Object(x.b)("/transfer/getParentCatalog",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,e.next=4,W("/api/categories/parent-catalog","POST",{id:t},{Authorization:"Base ".concat(r.id)});case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Lt=Object(x.b)("/transfer/update",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c,s,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,c=n.transferState,s={products:JSON.stringify(c.categoryChecked),categoryId:c.selectedCatalog},e.next=5,W("/api/categories/transfer","POST",s,{Authorization:"Base ".concat(r.id)});case 5:return i=e.sent,e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Et=Object(x.b)("/transfer/update",function(){var e=Object(B.a)(T.a.mark((function e(t,a){var n,r,c,s,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),r=n.authState,c=n.transferState,s={products:JSON.stringify(c.catalogChecked),categoryId:c.selectedCatalog},e.next=5,W("/api/categories/transfer-cancel","POST",s,{Authorization:"Base ".concat(r.id)});case 5:return i=e.sent,e.abrupt("return",i);case 9:throw e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,a.dispatch)(g({variant:"danger",text:e.t0.message})),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()),It={catalog:[],category:[],categoryFilter:[],catalogChecked:[],categoryChecked:[],catalogLoading:!1,categoryLoading:!1,selectedCatalog:null,selectedCategory:null},At=Object(x.c)({name:"transferSlice",initialState:It,reducers:{catalogCheck:function(e,t){var a=t.payload,n=e.catalogChecked.map((function(e){return e})),r=n.findIndex((function(e){return e===a}));return-1===r?n.push(a):n.splice(r,1),Object(h.a)(Object(h.a)({},e),{},{catalogChecked:n})},categoryCheck:function(e,t){var a=t.payload,n=e.categoryChecked.map((function(e){return e})),r=n.findIndex((function(e){return e===a}));return-1===r?n.push(a):n.splice(r,1),Object(h.a)(Object(h.a)({},e),{},{categoryChecked:n})},reset:function(){return It},selectCatalog:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{selectedCatalog:a,catalogChecked:It.catalogChecked})},selectCategory:function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{selectedCategory:a,categoryChecked:It.categoryChecked})}},extraReducers:(s={},Object(R.a)(s,Ft.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!0})})),Object(R.a)(s,Ft.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{catalog:a,catalogLoading:!1,categoryFilter:e.category.filter((function(e){var t=e._id;return a.every((function(e){return e._id.toString()!==t.toString()}))}))})})),Object(R.a)(s,Ft.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!1})})),Object(R.a)(s,kt.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{categoryLoading:!0})})),Object(R.a)(s,kt.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{category:a,categoryLoading:!1,categoryFilter:a.filter((function(t){var a=t._id;return e.catalog.every((function(e){return e._id.toString()!==a.toString()}))}))})})),Object(R.a)(s,kt.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{categoryLoading:!1})})),Object(R.a)(s,Pt.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!0})})),Object(R.a)(s,Pt.fulfilled,(function(e,t){var a,n=t.payload;return Object(h.a)(Object(h.a)({},e),{},{catalog:n,catalogLoading:!1,selectedCatalog:null===(a=n[0])||void 0===a?void 0:a.parent,categoryFilter:e.category.filter((function(e){var t=e._id;return n.every((function(e){return e._id.toString()!==t.toString()}))}))})})),Object(R.a)(s,Pt.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!1})})),Object(R.a)(s,Ct.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{categoryLoading:!0})})),Object(R.a)(s,Ct.fulfilled,(function(e,t){var a,n=t.payload;return Object(h.a)(Object(h.a)({},e),{},{category:n,categoryLoading:!1,selectedCategory:null===(a=n[0])||void 0===a?void 0:a.parent,categoryFilter:n.filter((function(t){var a=t._id;return e.catalog.every((function(e){return e._id.toString()!==a.toString()}))}))})})),Object(R.a)(s,Ct.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{categoryLoading:!1})})),Object(R.a)(s,Lt.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!0})})),Object(R.a)(s,Lt.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{catalog:a,catalogLoading:!1,categoryChecked:[],categoryFilter:e.category.filter((function(e){var t=e._id;return a.every((function(e){return e._id.toString()!==t.toString()}))}))})})),Object(R.a)(s,Lt.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!1})})),Object(R.a)(s,Et.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!0})})),Object(R.a)(s,Et.fulfilled,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{catalog:a,catalogLoading:!1,catalogChecked:[],categoryFilter:e.category.filter((function(e){var t=e._id;return a.every((function(e){return e._id.toString()!==t.toString()}))}))})})),Object(R.a)(s,Et.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{catalogLoading:!1})})),s)}),Rt=At.actions,_t=Rt.catalogCheck,Tt=Rt.categoryCheck,Bt=Rt.reset,zt=Rt.selectCatalog,Gt=Rt.selectCategory,Ht=At.reducer,Jt=function(){var e=Object(O.c)((function(e){return e.transferState})),t=e.catalogChecked,a=e.categoryChecked,n=e.catalogLoading,r=e.selectedCategory,c=e.selectedCatalog,s=Object(O.b)();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(N.a,{variant:"primary mb-2",disabled:n||!r||!c||0===a.length,onClick:function(){s(Lt())},children:">>"}),Object(y.jsx)(N.a,{variant:"success mt-2",disabled:n||0===t.length,onClick:function(){s(Et())},children:"<<"})]})},Kt=function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(he.a,{as:"p",animation:"grow",children:Object(y.jsx)(he.a,{xs:12,className:"rounded"})}),Object(y.jsx)(he.a,{as:"p",animation:"grow",children:Object(y.jsx)(he.a,{xs:12,className:"rounded"})}),Object(y.jsx)(he.a,{as:"p",animation:"grow",children:Object(y.jsx)(he.a,{xs:12,className:"rounded"})})]})},Mt=function(){var e=Object(O.c)((function(e){return e.transferState})),t=e.catalog,a=e.catalogChecked,n=e.catalogLoading,r=e.selectedCatalog,c=Object(O.b)(),s=function(e){c(_t(e.target.dataset.id))},o=function(e){c(zt(e.target.dataset.id)),c(Ft(e.target.dataset.id))};return Object(i.useEffect)((function(){c(Ft())}),[c]),n?Object(y.jsx)(Kt,{}):r||0!==t.length?Object(y.jsx)(V.a,{children:Object(y.jsxs)("tbody",{children:[r&&Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{width:"12px"}}),Object(y.jsx)("td",{children:Object(y.jsx)("span",{onClick:function(e){c(Pt(e.target.dataset.catalog))},"data-catalog":r,className:"cursor-pointer",children:".."})})]}),t.map((function(e){var t=e._id,n=e.isGood,r=e.name;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"align-middle p-1",style:{width:"12px"},children:!n&&Object(y.jsx)("span",{className:"text-muted p-1 rounded",children:"+"})}),Object(y.jsx)("td",{className:"p-1",children:Object(y.jsx)("span",{className:"cursor-pointer ".concat(a.some((function(e){return e===t}))?"text-success":"text-dark"),"data-id":t,onClick:n?s:o,children:r})})]},t)}))]})}):Object(y.jsx)("p",{className:"text-center",children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439"})},Vt=function(){var e=Object(O.c)((function(e){return e.transferState})),t=e.categoryFilter,a=e.categoryChecked,n=e.categoryLoading,r=e.selectedCategory,c=Object(O.b)(),s=function(e){c(Tt(e.target.dataset.id))},o=function(e){c(Gt(e.target.dataset.id)),c(kt(e.target.dataset.id))};return Object(i.useEffect)((function(){c(kt())}),[c]),n?Object(y.jsx)(Kt,{}):r||0!==t.length?Object(y.jsx)(V.a,{children:Object(y.jsxs)("tbody",{children:[r&&Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{width:"12px"}}),Object(y.jsx)("td",{children:Object(y.jsx)("span",{onClick:function(e){c(Ct(e.target.dataset.category))},"data-category":r,className:"cursor-pointer",children:".."})})]}),t.map((function(e){var t=e._id,n=e.isGood,r=e.name;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"align-middle p-1",style:{width:"12px"},children:!n&&Object(y.jsx)("span",{className:"text-muted p-1 rounded",children:"+"})}),Object(y.jsx)("td",{className:"p-1",children:Object(y.jsx)("span",{className:"cursor-pointer ".concat(a.some((function(e){return e===t}))?"text-primary":"text-dark"),"data-id":t,onClick:n?s:o,children:r})})]},t)}))]})}):Object(y.jsx)("p",{className:"text-center",children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439"})},Dt=function(){var e=Object(O.b)();return Object(i.useEffect)((function(){return function(){return e(Bt())}}),[]),Object(y.jsxs)(u.a,{className:"py-4",children:[Object(y.jsx)("h3",{children:"\u0422\u0440\u0430\u043d\u0441\u0444\u0435\u0440 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),Object(y.jsxs)(D.a,{className:"border px-2 py-4 bg-light rounded align-items-stretch",children:[Object(y.jsx)(q.a,{xs:12,md:5,children:Object(y.jsx)(u.a,{style:{height:"70vh"},className:"bg-white rounded border overflow-scroll py-2",children:Object(y.jsx)(Vt,{})})}),Object(y.jsx)(q.a,{xs:12,md:2,className:"d-flex flex-column justify-content-center align-items-center",children:Object(y.jsx)(Jt,{})}),Object(y.jsx)(q.a,{xs:12,md:5,children:Object(y.jsx)(u.a,{className:"bg-white rounded border py-2 h-100 pe-2 overflow-scroll",style:{overflowY:"scroll",maxHeight:"70vh"},children:Object(y.jsx)(Mt,{})})})]})]})};var qt=function(){var e=Object(O.c)((function(e){return e.authState})).id?Object(y.jsxs)(A.d,{children:[Object(y.jsx)(A.b,{path:"/admin/main",children:Object(y.jsx)(Ot,{})}),Object(y.jsx)(A.b,{path:"/admin/users",exact:!0,children:Object(y.jsx)(U,{})}),Object(y.jsx)(A.b,{path:"/admin/users/user",exact:!0,children:Object(y.jsx)(jt,{})}),Object(y.jsx)(A.b,{path:"/admin/users/user/:id",children:Object(y.jsx)(jt,{})}),Object(y.jsx)(A.b,{path:"/admin/fields",children:Object(y.jsx)(Nt,{})}),Object(y.jsx)(A.b,{path:"/admin/categories",exact:!0,children:Object(y.jsx)(Ie,{})}),Object(y.jsx)(A.b,{path:"/admin/categories/category/:obj",children:Object(y.jsx)(ut,{})}),Object(y.jsx)(A.b,{path:"/admin/goods",children:Object(y.jsx)(dt,{})}),Object(y.jsx)(A.b,{path:"/admin/transfer",children:Object(y.jsx)(Dt,{})}),Object(y.jsx)(A.a,{to:"/admin/main"})]}):Object(y.jsxs)(A.d,{children:[Object(y.jsx)(A.b,{path:"/admin/login",children:Object(y.jsx)(M,{})}),Object(y.jsx)(A.a,{to:"/admin/login"})]});return Object(y.jsxs)(j.a,{children:[Object(y.jsx)(w,{}),Object(y.jsx)(I,{}),e]})},Yt=Object(x.a)({reducer:{authState:L,alertState:v,categoriesState:ue,fieldsState:St,goodsState:Ze,transferState:Ht}});l.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(O.a,{store:Yt,children:Object(y.jsx)(qt,{})})}),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.0ca01cdf.chunk.js.map